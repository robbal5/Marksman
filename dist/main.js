!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var e=function(){function e(t,i,s,n,r,o,a,h,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.posX=t,this.posY=i,this.cropStartX=s,this.cropStartY=n,this.cropEndX=r,this.cropEndY=o,this.sizeX=a,this.sizeY=h,this.speed=Math.random(),this.source=l}var i,s;return i=e,(s=[{key:"drawCloud",value:function(t,e){e.drawImage(this.source,this.cropStartX,this.cropStartY,this.cropEndX,this.cropEndY,this.posX,this.posY,this.sizeX,this.sizeY)}},{key:"moveCloud",value:function(t,e){var i=Math.floor(this.posX-this.speed);i+this.sizeX<0&&(i=t.width,this.posY=Math.floor(30*Math.random())),this.posX=i}}])&&t(i.prototype,s),e}();function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picture=new Image,this.picture.src="../src/images/cannon_spritesheet.png",this.x=-138.75,this.y=-64.42,this.width=40,this.height=30,this.frameX=-140,this.frameY=50,this.firing=!1,this.rotation=45,this.state=0}var e,s;return e=t,(s=[{key:"drawCannon",value:function(t,e,i){if(e.save(),e.translate(t.width/2,t.height/2),e.rotate(.01745*-this.rotation),i)return e.drawImage(this.picture,60*Math.floor(this.state/3),80,60,35,this.x,this.y,25,12),e.translate(0,0),e.restore(),this.state+1<24?this.state+=1:this.state=0,this.state;e.drawImage(this.picture,60*Math.floor(this.state/3),80,60,35,this.x,this.y,25,12),e.translate(0,0),e.restore()}},{key:"rotateCannon",value:function(t){if(t){var e=this.rotation-1;if(e>=0){this.rotation=e;var i=.01745*this.rotation,s=.343765;this.x=-150*Math.cos(i-s)-3,this.y=-150*Math.sin(i-s)}}else{var n=this.rotation+1;if(n<=90){this.rotation=n;var r=.01745*this.rotation,o=.3446375;this.x=-150*Math.cos(r-o)-3,this.y=-150*Math.sin(r-o)}}}}])&&i(e.prototype,s),t}();function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xPos=e,this.yPos=i,this.state=1,this.flyPos=0,this.range=Math.floor(100*Math.random())+30,this.size=20,this.player=s,s&&(this.flyUp=new Image,this.flyUp.src="../src/images/flyup_target".concat(s,".png"),this.flyDown=new Image,this.flyDown.src="../src/images/flydown_target".concat(s,".png"))}var e,i;return e=t,(i=[{key:"drawTarget",value:function(t,e){this.flyPos<this.range/2?(this.yPos+=1,e.drawImage(this.flyUp,this.xPos,this.yPos,this.size,this.size),this.flyPos+=1):(this.yPos-=1,e.drawImage(this.flyDown,this.xPos,this.yPos,this.size,this.size),this.flyPos+=1,this.flyPos>this.range&&(this.flyPos=0))}}])&&n(e.prototype,i),t}();function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sound=document.getElementById(e)}var e,i;return e=t,(i=[{key:"play",value:function(){this.sound.play()}},{key:"stop",value:function(){this.sound.pause(),this.sound.currentTime=0}}])&&o(e.prototype,i),t}();function h(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectile=new Image,this.projectile.src="../src/images/ball.png",this.xPos=17,this.yPos=110,this.power=e/2,this.angle=i,this.dy=this.power*Math.sin(.01745*this.angle),this.dx=this.power/2*Math.cos(.01745*this.angle),this.xSize=8,this.ySize=8,this.hit=!1,this.timer=1,this.state=1,this.strike=new a("hit-sound"),this.miss=new a("miss-sound"),this.shoot=new a("cannon-sound")}var e,i;return e=t,(i=[{key:"drawProjectile",value:function(t,e,i){this.hit?(e.drawImage(this.projectile,64*Math.floor(this.timer/4%8),64*Math.floor(this.timer/32),60,60,this.xPos,this.yPos,20,20),this.timer+=1,this.timer>64&&(this.state=0,i.multiplayer&&(i.currentPlayer=1==i.currentPlayer?2:1))):(e.drawImage(this.projectile,0,0,100,100,this.xPos,this.yPos,this.xSize,this.ySize),this.xPos+=this.dx/2,this.dy-=1,this.yPos-=this.dy/3)}},{key:"checkCollisions",value:function(t,e,i){var s=this,n=this;if(this.yPos>e.height-25||this.xPos>e.width)return this.shoot.stop(),this.state=0,this.miss.play(),i.multiplayer&&(i.currentPlayer=1==i.currentPlayer?2:1),i.previousShotsHit=1,!1;var r=!1;return t.forEach((function(t){t.xPos-(n.xPos+n.xSize)<-5&&t.xPos+t.size-n.xPos>0&&t.yPos-(n.yPos+n.ySize)<-5&&t.yPos+t.size-n.yPos>0&&!n.hit&&(s.shoot.stop(),s.strike.play(),s.hit=!0,s.yPos=t.yPos,s.xPos=t.xPos,n.projectile.src="../src/images/explosion.png",t.state=0,r=!0)})),r}}])&&h(e.prototype,i),t}();function c(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=function(){function t(e,i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.numShots=e,this.numTargets=i,this.cannon=new s,this.targets=[],this.projectiles={},this.score=0,this.currentPower=50,this.currentAngle=45,this.previousShotsHit=1,this.clouds=n,this.sun=new Image,this.sun.src="../src/images/sun.png",this.firing=!1,this.gameWon=!1,this.gameLost=!1,this.multiplayer=r,this.targets2=[],this.projectiles2=[],this.score2=0,this.currentPlayer=1,this.numTargets2=i,this.winner=void 0,this.winningScore=void 0,this.shoot=new a("cannon-sound"),this.win=new a("win"),this.lose=new a("gameover")}var e,i;return e=t,(i=[{key:"startGame",value:function(){for(var t=[100,130,160,185,210,230,255,270,285,265],e=[10,20,30,40,50,10,20,30,40,50],i=0;i<this.numTargets;i++){var s=t.shift(),n=e.shift();this.targets.push(new r(s,n,1)),this.multiplayer&&this.targets2.push(new r(s,n,2))}}},{key:"updateGame",value:function(t){var e,i;"ArrowLeft"==t&&(this.cannon.rotateCannon(!1),(e=this.currentAngle+1)<=90&&(this.currentAngle=e)),"ArrowRight"==t&&(this.cannon.rotateCannon(!0),(e=this.currentAngle-1)>=0&&(this.currentAngle=e)),"ArrowUp"==t&&(i=this.currentPower+1)<=100&&(this.currentPower=i),"ArrowDown"==t&&(i=this.currentPower-1)>=0&&(this.currentPower=i)," "==t&&this.numShots>0&&(this.multiplayer?Object.values(this.projectiles).filter((function(t){return 1==t.state})).length<1&&Object.values(this.projectiles2).filter((function(t){return 1==t.state})).length<1&&(this.shoot.play(),this.firing=!0):(this.shoot.stop(),this.shoot.play(),this.firing=!0))}},{key:"drawGame",value:function(t,e){var i=this;if(e.clearRect(0,0,t.width,t.height),e.drawImage(this.sun,t.width-45,0,35,35),e.fillStyle="darkolivegreen",e.fillRect(0,t.height-30,t.width,30),this.clouds.forEach((function(i){i.moveCloud(t,e),i.drawCloud(t,e)})),this.firing){var s=this.cannon.drawCannon(t,e,this.firing);10==s&&(this.multiplayer?1==this.currentPlayer?this.projectiles[this.numShots]=new l(this.currentPower,this.currentAngle):(this.projectiles2[this.numShots]=new l(this.currentPower,this.currentAngle),this.numShots-=1):(this.projectiles[this.numShots]=new l(this.currentPower,this.currentAngle),this.numShots-=1)),this.firing=0!=s}else this.cannon.drawCannon(t,e,this.firing);this.multiplayer?1==this.currentPlayer?this.targets.forEach((function(i){1==i.state&&i.drawTarget(t,e)})):this.targets2.forEach((function(i){1==i.state&&i.drawTarget(t,e)})):this.targets.forEach((function(i){1==i.state&&i.drawTarget(t,e)}));var n=this,r=!1;if(this.multiplayer?1==this.currentPlayer?(Object.values(this.projectiles).filter((function(t){return 1==t.state})).forEach((function(s){s.checkCollisions(i.targets.filter((function(t){return 1==t.state})),t,n)&&(r=!0),1==s.state&&s.drawProjectile(t,e,n)})),r&&(this.score+=10,this.numTargets-=1)):(Object.values(this.projectiles2).filter((function(t){return 1==t.state})).forEach((function(s){s.checkCollisions(i.targets2.filter((function(t){return 1==t.state})),t,n)&&(r=!0),1==s.state&&s.drawProjectile(t,e,n)})),r&&(this.score2+=10,this.numTargets2-=1)):(Object.values(this.projectiles).filter((function(t){return 1==t.state})).forEach((function(s){s.checkCollisions(i.targets.filter((function(t){return 1==t.state})),t,n)&&(r=!0),1==s.state&&s.drawProjectile(t,e,n)})),r&&(this.score+=10*this.previousShotsHit,this.previousShotsHit+=1,this.numTargets-=1)),e.font="9px Helvetica",this.multiplayer){var o=1==this.currentPlayer?"Player 1":"Player 2";1==this.currentPlayer?this.score:this.score2,e.fillStyle="darkslategray",e.fillRect(0,0,55,40),e.fillStyle="lightgray",e.fillRect(0,0,50,35),e.fillStyle="black",e.fillText("Angle: ".concat(this.currentAngle),5,10),e.fillText("Power: ".concat(this.currentPower),5,20),e.fillText(o,5,30),e.fillText("Shots: ".concat(this.numShots),10,144),e.fillText("Player 1: ".concat(this.numTargets," Targets"),90,144),e.fillText("Player 2: ".concat(this.numTargets2," Targets"),210,144),e.fillStyle="white",e.fillText("Multiplayer",120,10)}else e.fillStyle="darkslategray",e.fillRect(0,0,55,30),e.fillStyle="lightgray",e.fillRect(0,0,50,25),e.fillStyle="black",e.fillText("Angle: ".concat(this.currentAngle),5,10),e.fillText("Power: ".concat(this.currentPower),5,20),e.fillText("Shots: ".concat(this.numShots),10,144),e.fillText("Targets: ".concat(this.numTargets),130,144),e.fillText("Score: ".concat(this.score),250,144),e.fillStyle="white",e.fillText("Solo",135,10);this.multiplayer?(this.numTargets<1?(this.win.play(),this.gameWon=!0,this.winner="Player 1",this.winningScore=this.score):this.numTargets2<1&&(this.win.play(),this.gameWon=!0,this.winner="Player 2",this.winningScore=this.score2),0==this.numShots&&Object.values(this.projectiles2).filter((function(t){return 1==t.state})).length<1&&(this.score>this.score2?(this.win.play(),this.gameWon=!0,this.winner="Player 1",this.winningScore=this.score):this.score<this.score2?(this.win.play(),this.gameWon=!0,this.winner="Player 2",this.winningScore=this.score2):(this.gameLost=!0,this.winningScore=this.score))):this.numTargets<1?(this.win.play(),this.gameWon=!0):this.numShots<1&&Object.values(this.projectiles).filter((function(t){return 1==t.state})).length<1&&(this.lose.play(),this.gameLost=!0)}}])&&c(e.prototype,i),t}();document.addEventListener("DOMContentLoaded",(function(){var t,i,n,o,a,h=document.getElementById("canvas"),c=h.getContext("2d"),f=function(t,i){var s=new Image;s.src="../src/images/sun.png",s.onload=function(){i.drawImage(s,t.width-45,0,35,35)};var n=new Image;n.src="../src/images/clouds.png";var r=[new e(30,25,0,0,390,220,40,30,n),new e(200,10,400,120,330,150,35,25,n),new e(280,35,400,120,330,150,35,25,n),new e(100,5,300,275,300,160,30,20,n)];return n.onload=function(){r.forEach((function(t){i.drawImage(n,t.cropStartX,t.cropStartY,t.cropEndX,t.cropEndY,t.posX,t.posY,t.sizeX,t.sizeY)}))},i.fillStyle="darkolivegreen",i.fillRect(0,t.height-30,t.width,30),i.fillStyle="black",i.font="15px Times New Roman",i.fillText("Click Enter to Begin!",90,80),r}(h,c);function g(){n=Date.now(),(a=n-o)>i&&(o=n-a%i,t.drawGame(h,c)),t.gameWon||t.gameLost?function(t,e,i){var s,n,r;if(t.multiplayer){if(t.gameLost){s="Looks like it was a tie!",n="gold",i.classList.add("won"),r=75;var o=document.getElementById("highscore");parseInt(o.innerHTML.split(" ")[2])<t.winningScore&&(o.innerHTML="High Score: ".concat(t.winningScore))}else{s="Congrats ".concat(t.winner,", great shooting!"),n="gold",i.classList.add("won"),r=40;var a=document.getElementById("highscore");parseInt(a.innerHTML.split(" ")[2])<t.winningScore&&(a.innerHTML="High Score: ".concat(t.winningScore))}e.clearRect(0,0,i.width,i.height),e.font="15px Fantasy",e.fillStyle=n,e.fillText(s,r,70),t.gameWon?(e.font="10px Fantasy",e.fillText("Player 1: ".concat(t.score," points"),r+10,85),e.fillText("Player 2: ".concat(t.score2," points"),r+130,85),e.font="10px Times New Roman",e.fillText("Click Enter to play again",95,140)):(e.font="10px Fantasy",e.fillText("Why not give it another shot?",r+5,85),e.font="10px Times New Roman",e.fillText("Click Enter to play again",95,140))}else{if(t.gameWon){s="Great shooting, you won!",n="gold",i.classList.add("won"),r=65;var h=document.getElementById("highscore");parseInt(h.innerHTML.split(" ")[2])<t.score&&(h.innerHTML="High Score: ".concat(t.score))}else s="Sorry, you ran out of shots",n="red",i.classList.add("lost"),r=60;e.clearRect(0,0,i.width,i.height),e.font="15px Fantasy",e.fillStyle=n,e.fillText(s,r,70),t.gameWon?(e.font="10px Fantasy",e.fillText("Score: ".concat(t.score),r+10,85),e.fillText("Shots remaining: ".concat(t.numShots),r+80,85),e.font="10px Times New Roman",e.fillText("Click Enter to play again",95,140)):(e.font="10px Fantasy",e.fillText("Why not give it another shot?",r+20,85),e.font="10px Times New Roman",e.fillText("Click Enter to play again",95,140))}}(t,c,h):requestAnimationFrame(g)}(new Image).src="../src/images/sun.png",document.querySelector(".how-to-link").addEventListener("click",(function(t){t.preventDefault();var e=document.getElementById("modal");e.classList.toggle("open"),document.querySelectorAll(".modal-exit").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),e.classList.remove("open")}))}))})),(new s).drawCannon(h,c),new r,new l(30,30),document.addEventListener("keydown",(function(e){if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," "].includes(e.key))t.updateGame(e.key);else{if("Enter"!=e.key)return;e.preventDefault();var s=document.getElementById("difficulty").value,n="true"==document.getElementById("multiplayer").value;switch(s){case"easy":t=new u(4,2,f,n);break;case"medium":t=new u(6,4,f,n);break;case"hard":t=new u(8,6,f,n);break;case"impossible":t=new u(10,10,f,n)}t.startGame(),i=1e3/30,o=Date.now(),g(),h.classList.remove("lost","won")}})),document.getElementById("mute").addEventListener("click",(function(t){t.target.classList.toggle("fa-volume-up"),t.target.classList.toggle("fa-volume-off");var e=document.querySelectorAll("audio");e[0].muted?e.forEach((function(t){return t.muted=!1})):e.forEach((function(t){return t.muted=!0}))}))}))}();
//# sourceMappingURL=main.js.map